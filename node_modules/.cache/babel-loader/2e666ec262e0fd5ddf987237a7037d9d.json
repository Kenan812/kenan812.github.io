{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/kenan/OneDrive/Desktop/front-end.site/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/kenan/OneDrive/Desktop/front-end.site/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"C:/Users/kenan/OneDrive/Desktop/front-end.site/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/kenan/OneDrive/Desktop/front-end.site/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import Axios from'axios';import{Redirect}from'react-router-dom';import{parseJwt}from'./Helpers';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function LoginForm(){var url=\"http://kanan02-001-site1.itempurl.com/api/Auth/login\";var _useState=useState(false),_useState2=_slicedToArray(_useState,2),confirm=_useState2[0],setConfirm=_useState2[1];var _useState3=useState({userName:\"\",password:\"\"}),_useState4=_slicedToArray(_useState3,2),data=_useState4[0],setData=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),errorMes=_useState6[0],seterrorMes=_useState6[1];function handle(e){var newdata=_objectSpread({},data);newdata[e.target.id]=e.target.value;setData(newdata);}function submit(_x){return _submit.apply(this,arguments);}function _submit(){_submit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.next=3;return Axios.post(url,{userName:data.userName,password:data.password}).then(function(res){// var currentdate = new Date()\n// adds token to cookie\nvar date=new Date();var expiresDate=new Date(date.setDate(date.getDate()+1));var expiresDateString=expiresDate.toUTCString();document.cookie=\"token=\".concat(res.data,\"; expires=\").concat(expiresDateString,\";\");setConfirm(true);}).catch(function(error){if(error.response!=null){setConfirm(false);seterrorMes(error.response.data);}return;});case 3:case\"end\":return _context.stop();}}},_callee);}));return _submit.apply(this,arguments);}if(confirm){return/*#__PURE__*/_jsx(Redirect,{to:\"/profile\"});}return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(e){return submit(e);},className:\"login-form\",children:[/*#__PURE__*/_jsxs(\"ul\",{className:\"login-ul list\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"list-item\",children:/*#__PURE__*/_jsx(\"label\",{className:\"login-text\",children:\"Username\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"list-item\",children:/*#__PURE__*/_jsx(\"input\",{name:\"username\",id:\"userName\",type:\"text\",onChange:function onChange(e){return handle(e);},value:data.userName,placeholder:\"Username\",className:\"login-textinput input\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"list-item\",children:/*#__PURE__*/_jsx(\"label\",{className:\"login-label\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Password\"})})}),/*#__PURE__*/_jsx(\"li\",{className:\"list-item\",children:/*#__PURE__*/_jsx(\"input\",{name:\"password\",id:\"password\",onChange:function onChange(e){return handle(e);},value:data.password,type:\"password\",placeholder:\"Password\",className:\"login-textinput1 input\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"list-item\",children:/*#__PURE__*/_jsx(\"label\",{className:\"login-label\",children:errorMes})}),/*#__PURE__*/_jsx(\"li\",{className:\"login-li2 list-item\",children:/*#__PURE__*/_jsx(\"span\",{className:\"login-text2\",children:\"Forgot Password?\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"login-li3 list-item\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Login\",className:\"login-textinput2 input\"})]})});}","map":{"version":3,"names":["React","useState","useEffect","Axios","Redirect","parseJwt","LoginForm","url","confirm","setConfirm","userName","password","data","setData","errorMes","seterrorMes","handle","e","newdata","target","id","value","submit","preventDefault","post","then","res","date","Date","expiresDate","setDate","getDate","expiresDateString","toUTCString","document","cookie","catch","error","response"],"sources":["C:/Users/kenan/OneDrive/Desktop/front-end.site/src/components/LoginForm.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport Axios from 'axios'\r\nimport { Redirect } from 'react-router-dom';\r\nimport { parseJwt } from './Helpers';\r\nexport default function LoginForm() {\r\n  const url = \"http://kanan02-001-site1.itempurl.com/api/Auth/login\";\r\n  const [confirm, setConfirm] = useState(false);\r\n  const [data, setData] = useState({\r\n    userName: \"\",\r\n    password: \"\",\r\n  })\r\n  const [errorMes, seterrorMes] = useState(\"\");\r\n\r\n  function handle(e) {\r\n    const newdata = { ...data }\r\n    newdata[e.target.id] = e.target.value\r\n    setData(newdata)\r\n  }\r\n\r\n  async function submit(e) {\r\n    e.preventDefault();\r\n\r\n    await Axios.post(url, {\r\n      userName: data.userName,\r\n      password: data.password\r\n    })\r\n      .then(res => {\r\n        // var currentdate = new Date()\r\n        // adds token to cookie\r\n        var date = new Date();\r\n        var expiresDate = new Date(date.setDate(date.getDate() + 1));\r\n        var expiresDateString = expiresDate.toUTCString();\r\n        document.cookie = `token=${res.data}; expires=${expiresDateString};`;\r\n\r\n        setConfirm(true);\r\n      })\r\n      .catch((error) => {\r\n        if (error.response != null) {\r\n          setConfirm(false);\r\n          seterrorMes(error.response.data);\r\n        }\r\n        return;\r\n      });\r\n  }\r\n  if (confirm) {\r\n    return <Redirect to=\"/profile\" />\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <form onSubmit={(e) => submit(e)} className=\"login-form\">\r\n        <ul className=\"login-ul list\">\r\n          <li className=\"list-item\">\r\n            <label className=\"login-text\">Username</label>\r\n          </li>\r\n          <li className=\"list-item\">\r\n            <input name='username' id='userName'\r\n              type=\"text\" onChange={(e) => handle(e)} value={data.userName}\r\n              placeholder=\"Username\"\r\n              className=\"login-textinput input\"\r\n            />\r\n          </li>\r\n          <li className=\"list-item\">\r\n            <label className=\"login-label\">\r\n              <span>Password</span>\r\n            </label>\r\n          </li>\r\n          <li className=\"list-item\">\r\n            <input name='password' id='password' onChange={(e) => handle(e)} value={data.password}\r\n              type=\"password\"\r\n              placeholder=\"Password\"\r\n              className=\"login-textinput1 input\"\r\n            />\r\n          </li>\r\n          <li className=\"list-item\">\r\n            <label className=\"login-label\">\r\n              {errorMes}\r\n            </label>\r\n          </li>\r\n          <li className=\"login-li2 list-item\">\r\n            <span className=\"login-text2\">Forgot Password?</span>\r\n          </li>\r\n          <li className=\"login-li3 list-item\"></li>\r\n        </ul>\r\n        <input\r\n          type=\"submit\"\r\n          value=\"Login\"\r\n          className=\"login-textinput2 input\"\r\n        />\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}